-- Brookhaven Noclip TOTAL - VocÃª e a bola atravessam TODOS os jogadores
-- VocÃªs sÃ£o fantasmas para outros players
-- Frost230_0

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local PhysicsService = game:GetService("PhysicsService")
local player = Players.LocalPlayer

print("ğŸ‘» Iniciando Modo Fantasma + Anti-Pulo + Speed...")

--// SET WALK SPEED 25.7
local function setSpeed(character)
    local humanoid = character:WaitForChild("Humanoid")
    humanoid.WalkSpeed = 25.7
    print("âš¡ Speed definido: 25.7")
end

--// ANTI PULO - BROOKHAVEN
local function applyAntiJump(character)
    local humanoid = character:WaitForChild("Humanoid")
    humanoid.JumpPower = 0
    humanoid.UseJumpPower = true
    humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping, false)
    
    -- ForÃ§a no chÃ£o sempre
    RunService.Stepped:Connect(function()
        if humanoid and humanoid.Parent then
            humanoid.JumpPower = 0
            humanoid:ChangeState(Enum.HumanoidStateType.Running)
        end
    end)
    
    print("ğŸš« Anti-Pulo ativado!")
end

-- Aplica Speed quando spawnar
if player.Character then
    setSpeed(player.Character)
end
player.CharacterAdded:Connect(setSpeed)

-- Aplica Anti-Pulo quando spawnar
if player.Character then
    applyAntiJump(player.Character)
end
player.CharacterAdded:Connect(applyAntiJump)

-- Cria grupos de colisÃ£o
pcall(function()
    PhysicsService:RegisterCollisionGroup("Bolas")
    PhysicsService:RegisterCollisionGroup("LocalPlayer")
    PhysicsService:RegisterCollisionGroup("OutrosJogadores")
end)

-- CONFIGURAÃ‡ÃƒO: Nem vocÃª nem bola colidem com outros jogadores
PhysicsService:CollisionGroupSetCollidable("Bolas", "OutrosJogadores", false)
PhysicsService:CollisionGroupSetCollidable("LocalPlayer", "OutrosJogadores", false)

-- Mas vocÃª e a bola colidem com tudo mais (chÃ£o, paredes, objetos)
PhysicsService:CollisionGroupSetCollidable("Bolas", "Default", true)
PhysicsService:CollisionGroupSetCollidable("LocalPlayer", "Default", true)

-- Bola e vocÃª podem colidir entre si
PhysicsService:CollisionGroupSetCollidable("Bolas", "LocalPlayer", true)

print("âœ… Modo Fantasma configurado!")

-- Cache
local bolasAtivas = {}
local jogadoresProcessados = {}

-- Identifica bolas
local function ehBola(obj)
    if not obj then return false end
    local nome = obj.Name:lower()
    return nome:match("ball") or nome:match("bola") or 
           nome:match("basketball") or nome:match("soccer") or
           nome:match("football") or nome:match("tennis") or
           nome:match("volleyball") or nome:match("basebol")
end

-- Configura bola COM FORÃ‡A
local function configurarBola(parte)
    if not parte or not parte:IsA("BasePart") then return end
    
    parte.CollisionGroup = "Bolas"
    bolasAtivas[parte] = true
    
    -- Monitor AGRESSIVO para a bola
    spawn(function()
        while parte and parte.Parent do
            parte.CollisionGroup = "Bolas"
            task.wait(0.05) -- Muito mais rÃ¡pido
        end
    end)
    
    -- Segundo monitor de backup
    parte:GetPropertyChangedSignal("CollisionGroup"):Connect(function()
        if parte.CollisionGroup ~= "Bolas" then
            parte.CollisionGroup = "Bolas"
        end
    end)
end

-- Configura SEU character como fantasma
local function configurarLocalPlayer(char)
    if not char then return end
    
    spawn(function()
        task.wait(0.1)
        
        for _, desc in pairs(char:GetDescendants()) do
            if desc:IsA("BasePart") then
                desc.CollisionGroup = "LocalPlayer"
            end
        end
        
        char.DescendantAdded:Connect(function(desc)
            if desc:IsA("BasePart") then
                desc.CollisionGroup = "LocalPlayer"
            end
        end)
        
        -- MantÃ©m vocÃª como fantasma
        spawn(function()
            while char and char.Parent do
                for _, part in pairs(char:GetDescendants()) do
                    if part:IsA("BasePart") and part.CollisionGroup ~= "LocalPlayer" then
                        part.CollisionGroup = "LocalPlayer"
                    end
                end
                task.wait(0.5)
            end
        end)
        
        print("ğŸ‘» VocÃª agora Ã© um fantasma!")
    end)
end

-- Configura outros jogadores
local function configurarOutroJogador(char)
    if not char or jogadoresProcessados[char] then return end
    
    spawn(function()
        task.wait(0.1)
        
        for _, desc in pairs(char:GetDescendants()) do
            if desc:IsA("BasePart") then
                desc.CollisionGroup = "OutrosJogadores"
            end
        end
        
        char.DescendantAdded:Connect(function(desc)
            if desc:IsA("BasePart") then
                desc.CollisionGroup = "OutrosJogadores"
            end
        end)
        
        -- MantÃ©m outros jogadores no grupo correto
        spawn(function()
            while char and char.Parent do
                for _, part in pairs(char:GetDescendants()) do
                    if part:IsA("BasePart") and part.CollisionGroup ~= "OutrosJogadores" then
                        part.CollisionGroup = "OutrosJogadores"
                    end
                end
                task.wait(1)
            end
        end)
    end)
    
    jogadoresProcessados[char] = true
end

-- Configura VOCÃŠ como fantasma
if player.Character then
    configurarLocalPlayer(player.Character)
end

player.CharacterAdded:Connect(function(char)
    task.wait(0.1)
    configurarLocalPlayer(char)
end)

-- Configura TODOS os outros jogadores
print("ğŸ‘¥ Configurando outros jogadores...")
for _, p in pairs(Players:GetPlayers()) do
    if p ~= player then -- NÃ£o configura vocÃª
        if p.Character then
            configurarOutroJogador(p.Character)
        end
        p.CharacterAdded:Connect(function(char)
            task.wait(0.1)
            configurarOutroJogador(char)
        end)
    end
end

Players.PlayerAdded:Connect(function(p)
    if p ~= player then
        p.CharacterAdded:Connect(function(char)
            task.wait(0.1)
            configurarOutroJogador(char)
        end)
    end
end)

-- Processa bolas existentes
print("ğŸ€ Procurando bolas...")
for _, obj in pairs(workspace:GetDescendants()) do
    if ehBola(obj) then
        configurarBola(obj)
        for _, child in pairs(obj:GetDescendants()) do
            if child:IsA("BasePart") then
                configurarBola(child)
            end
        end
        print("âœ… Bola encontrada: " .. obj.Name)
    end
end

-- Monitor do inventÃ¡rio
local function monitorarInventario(char)
    char.ChildAdded:Connect(function(tool)
        if tool:IsA("Tool") and ehBola(tool) then
            task.wait(0.05)
            for _, part in pairs(tool:GetDescendants()) do
                if part:IsA("BasePart") then
                    configurarBola(part)
                end
            end
            print("âœ… Bola equipada: " .. tool.Name)
        end
    end)
end

if player.Character then
    monitorarInventario(player.Character)
end

player.CharacterAdded:Connect(function(char)
    task.wait(0.1)
    monitorarInventario(char)
end)

-- Monitor de novas bolas
workspace.DescendantAdded:Connect(function(obj)
    if ehBola(obj) then
        task.wait(0.05)
        configurarBola(obj)
        for _, child in pairs(obj:GetDescendants()) do
            if child:IsA("BasePart") then
                configurarBola(child)
            end
        end
    end
end)

-- Loop principal
local frame = 0
local connection = RunService.Heartbeat:Connect(function()
    frame = frame + 1
    
    -- MantÃ©m bolas no grupo correto COM FORÃ‡A
    if frame % 5 == 0 then -- Mudou de 10 para 5 (mais rÃ¡pido)
        for bola, _ in pairs(bolasAtivas) do
            if bola and bola.Parent then
                bola.CollisionGroup = "Bolas" -- ForÃ§a sempre
            else
                bolasAtivas[bola] = nil
            end
        end
        
        -- Procura novas bolas
        for _, obj in pairs(workspace:GetDescendants()) do
            if ehBola(obj) and not bolasAtivas[obj] then
                configurarBola(obj)
            end
        end
    end
    
    -- MantÃ©m VOCÃŠ como fantasma
    if frame % 20 == 0 and player.Character then
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") and part.CollisionGroup ~= "LocalPlayer" then
                part.CollisionGroup = "LocalPlayer"
            end
        end
    end
    
    -- MantÃ©m outros jogadores no grupo correto
    if frame % 45 == 0 then
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= player and p.Character then
                for _, part in pairs(p.Character:GetDescendants()) do
                    if part:IsA("BasePart") and part.CollisionGroup ~= "OutrosJogadores" then
                        part.CollisionGroup = "OutrosJogadores"
                    end
                end
            end
        end
    end
end)

-- Loop de seguranÃ§a COM FOCO NA BOLA
spawn(function()
    while task.wait(0.5) do -- Mudou de 2 para 0.5 (mais rÃ¡pido)
        pcall(function()
            PhysicsService:CollisionGroupSetCollidable("Bolas", "OutrosJogadores", false)
            PhysicsService:CollisionGroupSetCollidable("LocalPlayer", "OutrosJogadores", false)
            PhysicsService:CollisionGroupSetCollidable("Bolas", "Default", true)
            PhysicsService:CollisionGroupSetCollidable("LocalPlayer", "Default", true)
        end)
        
        -- FORÃ‡A EXTRA: ForÃ§a todas as bolas a cada 0.5s
        for bola, _ in pairs(bolasAtivas) do
            if bola and bola.Parent then
                bola.CollisionGroup = "Bolas"
            end
        end
    end
end)

_G.BrookhavenNoclipConnection = connection

print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
print("ğŸ‘» MODO FANTASMA ATIVADO!")
print("ğŸš« ANTI-PULO ATIVADO!")
print("âš¡ SPEED FIXO: 25.7")
print("ğŸ€ Bola atravessa TODOS os jogadores")
print("ğŸš¶ VOCÃŠ atravessa TODOS os jogadores")
print("ğŸ§± VocÃªs colidem com chÃ£o e paredes")
print("âš½ VocÃª e a bola colidem entre si")
print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
print("")
print("Para desativar:")
print("_G.BrookhavenNoclipConnection:Disconnect()")
print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
